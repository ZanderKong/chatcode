# 前端可观测性入门：让页面会说话

做前端久了，你会发现「页面坏了」只是结果，背后需要一套语言让它说出发生了什么。

## 先定义目标

- **稳定性**：关键操作的成功率与耗时。
- **可追溯**：遇到异常时能回放用户旅程。
- **及时性**：重要错误触发告警，第一时间通知。

## 建立最小可用链路

1. 在入口处生成 `sessionId`，贯穿日志、埋点与错误上报。
2. 用 `performance.getEntries()` 收集关键指标，批量上报。
3. 把「页面事件」和「后端 traceId」关联，方便跨端定位。

```js
window.addEventListener('error', (event) => {
  sendLog({
    type: 'error',
    message: event.message,
    stack: event.error?.stack,
    sessionId,
  });
});
```

## 渐进扩展

- 引入可视化看板，标注每次部署的版本号。
- 建立「自愈」机制：前端兜底、重试与降级策略。
- 保持隐私合规，敏感字段在采集前脱敏。

当用户报错截图变少，你的可观测性基本到位了。
